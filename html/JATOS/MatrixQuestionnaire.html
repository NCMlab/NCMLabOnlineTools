<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex">
    <meta name="description" content="jsPsych Questionnaire">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <meta name="author" content="Jason Steffener, NCMLab">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCMLab:  Questionnaire</title>
    
    
    
    <!--<link rel="stylesheet" type='text/css' href='css/CSScodeThatIsUsed.css'>-->
    <link rel="stylesheet" type='text/css' href='css/SurveyMatrix.css'>
    

    <script src="jatos.js"></script>
    <script src="jspsych/dist/jspsych.js"></script>
    <script src="jspsych_addons/jspsych-survey-matrix.js"></script>
    <script src="functions/GeneralPurposeFunctions/NCMGeneralFunctions.js"></script>
    <script src="functions/GeneralPurposeFunctions/HeaderFunctions.js"></script>
    <script src="InstructionsAndStimuli/EN/Questionnaires/panasShortWeeklyJSON.js"></script>

    <!-- <script src="InstructionsAndStimuli/ConsentForms/MentalHealthResources.js"></script> -->
    
    
    <script src="ImportedModules/jquery-3.6.4.js"></script> 
    

    <script>
        // function to Initialize jsPsych
        // this is used with a THHEN after the promise of loading the 
        // questionnaire file is resolved

    var matrix_trial = {
        type: jsPsychSurveyMatrix,
        JSONinput: survey_JSON,
        button_label: "Submit",
        required: true,
        on_finish: function(data) {
          console.log(data)
            }
        };
        var jsPsych = initJsPsych({
            display_element: 'jspsych-target',
            auto_update_progress_bar: false,
            show_progress_bar: false,
            on_finish: function() {
                jatos.submitResultData(jsPsych.data.get().json())
            }
        })

        jatos.onLoad(() => {
            // Once Jatos has been loaded
            // What is the language?
                //  set up jsPsych 
                
                // run jsPsych
                console.log(matrix_trial)
                jsPsych.run([matrix_trial])

        })
    </script>
    
    </head>
    <body>
        <!-- The body contains the header buttons, the 'stage,' and the footer-->
        <div id="headerButtons"></div>
        <div id="jspsych-target"  style="overflow:auto; height:100%" class='center'></div>
    </body>
</html>