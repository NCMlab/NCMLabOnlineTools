<html>
  <body>
<script>
  
  function UrlExists(url)
  {
      var http = new XMLHttpRequest();
      http.open('HEAD', url, false);
      http.send();
      return http.status!=404;
  }

    var InternalLocation = '../jspsych/'
    var ExternalLocation = '/static/'
    
  function LoadIntExt(file) {
    if (UrlExists(ExternalLocation + "dist/jspsych.js")) {
      console.log("Trying External")
      const newScript = document.createElement('script');
      newScript.setAttribute('src', ExternalLocation + file);
      newScript.setAttribute('async', 'true');    
      document.head.appendChild(newScript);
    }
    else if (UrlExists(InternalLocation + "dist/jspsych.js")) {
      console.log("Trying Internal")
      const newScript = document.createElement('script');
      newScript.setAttribute('src', InternalLocation + file);
      newScript.setAttribute('async', 'true');    
      document.head.appendChild(newScript);
    }
}
</script>
<script>
  LoadIntExt('/dist/jspsych.js')    
  LoadIntExt('/dist/plugin-survey.js')    
</script>
</body>
</html>

ht